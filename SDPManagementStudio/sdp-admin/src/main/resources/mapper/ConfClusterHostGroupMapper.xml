<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sunbox.sdpadmin.mapper.ConfClusterHostGroupMapper">
    <resultMap id="BaseResultMap" type="com.sunbox.domain.ConfClusterHostGroup">
        <id column="group_id" jdbcType="VARCHAR" property="groupId"/>
        <result column="cluster_id" jdbcType="VARCHAR" property="clusterId"/>
        <result column="group_name" jdbcType="VARCHAR" property="groupName"/>
        <result column="vm_role" jdbcType="VARCHAR" property="vmRole"/>
        <result column="ins_count" jdbcType="INTEGER" property="insCount"/>
        <result column="state" jdbcType="INTEGER" property="state"/>
        <result column="yarn_queue" jdbcType="VARCHAR" property="yarnQueue"/>
        <result column="createdby" jdbcType="VARCHAR" property="createdby"/>
        <result column="created_time" jdbcType="TIMESTAMP" property="createdTime"/>
        <result column="modifiedby" jdbcType="VARCHAR" property="modifiedby"/>
        <result column="modified_time" jdbcType="TIMESTAMP" property="modifiedTime"/>
        <result column="purchase_type" jdbcType="INTEGER" property="purchaseType"/>
        <result column="max_unit" jdbcType="INTEGER" property="maxUnit"/>
        <result column="min_unit" jdbcType="INTEGER" property="minUnit"/>
        <result column="enable_afterstart_script" jdbcType="INTEGER" property="enableAfterstartScript"/>
        <result column="enable_beforestart_script" jdbcType="INTEGER" property="enableBeforestartScript"/>
        <result column="expect_count" jdbcType="INTEGER" property="expectCount"/>
        <result column="spot_state" jdbcType="INTEGER" property="spotState"/>
    </resultMap>
    <sql id="Base_Column_List">
        group_id
        , cluster_id, group_name, vm_role, ins_count, state, yarn_queue, createdby,
        created_time, modifiedby,
        modified_time,purchase_type,max_unit,min_unit,enable_afterstart_script,enable_beforestart_script,expect_count,spot_state
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from conf_cluster_host_group
        where group_id = #{groupId,jdbcType=VARCHAR}
    </select>

    <select id="selectByClusterIdAndGroupName" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from conf_cluster_host_group
        where cluster_id = #{clusterId,jdbcType=VARCHAR}
        and group_name = #{groupName,jdbcType=VARCHAR}
    </select>

    <select id="selectByValidClusterId" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from conf_cluster_host_group
        where cluster_id = #{clusterId,jdbcType=VARCHAR} and state =2
    </select>

    <select id="selectInsCountByVmRole" parameterType="java.lang.String" resultType="int">
        select
        count(*)
        from conf_cluster_host_group
        where cluster_id = #{clusterId,jdbcType=VARCHAR} and vm_role = #{vmRole,jdbcType=VARCHAR}
    </select>

    <select id="selectAllByObject" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from conf_cluster_host_group
        where 1=1
        <if test="groupId!=null and groupId!=''">
            and group_id = #{groupId,jdbcType=VARCHAR}
        </if>
        <if test="clusterId!=null and clusterId!=''">
            and cluster_id = #{clusterId,jdbcType=VARCHAR}
        </if>
        <if test="vmRole!=null and vmRole!=''">
            and vm_role = #{vmRole,jdbcType=VARCHAR}
        </if>
        <if test="vmRoles!=null">
            and vm_role in
            <foreach collection="vmRoles" index="index" open="(" close=")" separator="," item="item">
                #{item}
            </foreach>
        </if>
        order by created_time
    </select>
    <select id="selectByClusterId" resultType="com.sunbox.domain.ConfClusterHostGroup">
        select
        <include refid="Base_Column_List"/>
        from conf_cluster_host_group
        where cluster_id = #{clusterId,jdbcType=VARCHAR}
    </select>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        delete
        from conf_cluster_host_group
        where group_id = #{groupId,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="com.sunbox.domain.ConfClusterHostGroup">
        insert into conf_cluster_host_group (group_id, cluster_id, group_name,
        vm_role, ins_count, state,
        yarn_queue, createdby, created_time,
        modifiedby,
        modified_time,purchase_type,max_unit,min_unit,enable_beforestart_script,enable_afterstart_script,expect_count)
        values (#{groupId,jdbcType=VARCHAR}, #{clusterId,jdbcType=VARCHAR}, #{groupName,jdbcType=VARCHAR},
        #{vmRole,jdbcType=VARCHAR}, #{insCount,jdbcType=INTEGER}, #{state,jdbcType=INTEGER},
        #{yarnQueue,jdbcType=VARCHAR}, #{createdby,jdbcType=VARCHAR}, #{createdTime,jdbcType=TIMESTAMP},
        #{modifiedby,jdbcType=VARCHAR}, #{modifiedTime,jdbcType=TIMESTAMP},#{purchaseType,jdbcType=INTEGER},
        #{maxUnit,jdbcType=INTEGER},#{minUnit,jdbcType=INTEGER}, #{enableAfterstartScript,jdbcType=INTEGER},
        #{enableBeforestartScript,jdbcType=INTEGER}, #{expectCount,jdbcType=INTEGER})
    </insert>
    <insert id="insertSelective" parameterType="com.sunbox.domain.ConfClusterHostGroup">
        insert into conf_cluster_host_group
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="groupId != null">
                group_id,
            </if>
            <if test="clusterId != null">
                cluster_id,
            </if>
            <if test="groupName != null">
                group_name,
            </if>
            <if test="vmRole != null">
                vm_role,
            </if>
            <if test="insCount != null">
                ins_count,
            </if>
            <if test="state != null">
                state,
            </if>
            <if test="yarnQueue != null">
                yarn_queue,
            </if>
            <if test="createdby != null">
                createdby,
            </if>
            <if test="createdTime != null">
                created_time,
            </if>
            <if test="modifiedby != null">
                modifiedby,
            </if>
            <if test="modifiedTime != null">
                modified_time,
            </if>
            <if test="purchaseType != null">
                purchase_type,
            </if>
            <if test="maxUnit != null">
                max_unit,
            </if>
            <if test="minUnit != null">
                min_unit,
            </if>
            <if test="enableAfterstartScript != null">
                enable_afterstart_script,
            </if>
            <if test="enableBeforestartScript != null">
                enable_beforestart_script,
            </if>
            <if test="expectCount != null">
                expect_count
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="groupId != null">
                #{groupId,jdbcType=VARCHAR},
            </if>
            <if test="clusterId != null">
                #{clusterId,jdbcType=VARCHAR},
            </if>
            <if test="groupName != null">
                #{groupName,jdbcType=VARCHAR},
            </if>
            <if test="vmRole != null">
                #{vmRole,jdbcType=VARCHAR},
            </if>
            <if test="insCount != null">
                #{insCount,jdbcType=INTEGER},
            </if>
            <if test="state != null">
                #{state,jdbcType=INTEGER},
            </if>
            <if test="yarnQueue != null">
                #{yarnQueue,jdbcType=VARCHAR},
            </if>
            <if test="createdby != null">
                #{createdby,jdbcType=VARCHAR},
            </if>
            <if test="createdTime != null">
                #{createdTime,jdbcType=TIMESTAMP},
            </if>
            <if test="modifiedby != null">
                #{modifiedby,jdbcType=VARCHAR},
            </if>
            <if test="modifiedTime != null">
                #{modifiedTime,jdbcType=TIMESTAMP},
            </if>
            <if test="purchaseType != null">
                #{purchaseType,jdbcType=INTEGER},
            </if>
            <if test="maxUnit != null">
                #{maxUnit,jdbcType=INTEGER},
            </if>
            <if test="minUnit != null">
                #{minUnit,jdbcType=INTEGER},
            </if>
            <if test="enableAfterstartScript != null">
                #{enableAfterstartScript,jdbcType=INTEGER},
            </if>
            <if test="enableBeforestartScript != null">
                #{enableBeforestartScript,jdbcType=INTEGER},
            </if>
            <if test="expectCount!=null">
                #{expectCount,jdbcType=INTEGER}
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.sunbox.domain.ConfClusterHostGroup">
        update conf_cluster_host_group
        <set>
            <if test="clusterId != null">
                cluster_id = #{clusterId,jdbcType=VARCHAR},
            </if>
            <if test="groupName != null">
                group_name = #{groupName,jdbcType=VARCHAR},
            </if>
            <if test="vmRole != null">
                vm_role = #{vmRole,jdbcType=VARCHAR},
            </if>
            <if test="insCount != null">
                ins_count = #{insCount,jdbcType=INTEGER},
            </if>
            <if test="state != null">
                state = #{state,jdbcType=INTEGER},
            </if>
            <if test="yarnQueue != null">
                yarn_queue = #{yarnQueue,jdbcType=VARCHAR},
            </if>
            <if test="createdby != null">
                createdby = #{createdby,jdbcType=VARCHAR},
            </if>
            <if test="createdTime != null">
                created_time = #{createdTime,jdbcType=TIMESTAMP},
            </if>
            <if test="modifiedby != null">
                modifiedby = #{modifiedby,jdbcType=VARCHAR},
            </if>
            <if test="modifiedTime != null">
                modified_time = #{modifiedTime,jdbcType=TIMESTAMP},
            </if>
            <if test="purchaseType != null">
                purchase_type= #{purchaseType,jdbcType=INTEGER},
            </if>
            <if test="maxUnit != null">
                max_unit= #{maxUnit,jdbcType=INTEGER},
            </if>
            <if test="minUnit != null">
                min_unit= #{minUnit,jdbcType=INTEGER},
            </if>
            <if test="enableAfterstartScript != null">
                enable_afterstart_script = #{enableAfterstartScript,jdbcType=INTEGER},
            </if>
            <if test="enableBeforestartScript != null">
                enable_beforestart_script = #{enableBeforestartScript,jdbcType=INTEGER},
            </if>
            <if test="expectCount != null">
                expect_count = #{expectCount,jdbcType=INTEGER}
            </if>
        </set>
        where group_id = #{groupId,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.sunbox.domain.ConfClusterHostGroup">
        update conf_cluster_host_group
        set cluster_id = #{clusterId,jdbcType=VARCHAR},
        group_name = #{groupName,jdbcType=VARCHAR},
        vm_role = #{vmRole,jdbcType=VARCHAR},
        ins_count = #{insCount,jdbcType=INTEGER},
        state = #{state,jdbcType=INTEGER},
        yarn_queue = #{yarnQueue,jdbcType=VARCHAR},
        createdby = #{createdby,jdbcType=VARCHAR},
        created_time = #{createdTime,jdbcType=TIMESTAMP},
        modifiedby = #{modifiedby,jdbcType=VARCHAR},
        modified_time = #{modifiedTime,jdbcType=TIMESTAMP},
        purchase_type= #{purchaseType,jdbcType=INTEGER},
        max_unit= #{maxUnit,jdbcType=INTEGER},
        min_unit= #{minUnit,jdbcType=INTEGER},
        expect_count = #{expectCount,jdbcType=INTEGER},
        enable_afterstart_script = #{enableAfterstartScript,jdbcType=INTEGER},
        enable_beforestart_script = #{enableBeforestartScript,jdbcType=INTEGER}
        where group_id = #{groupId,jdbcType=VARCHAR}
    </update>
    <update id="updateByClusterIdAndGroupNameAndVmRole" parameterType="com.sunbox.domain.ConfClusterHostGroup">
        update conf_cluster_host_group
        set `state` = #{state,jdbcType=INTEGER}
        where cluster_id = #{clusterId,jdbcType=VARCHAR}
        and vm_role = #{vmRole,jdbcType=VARCHAR}
        and group_name = #{groupName,jdbcType=VARCHAR}
    </update>
    <update id="updateByClusterId">
        update conf_cluster_host_group
        set `state` = #{state,jdbcType=INTEGER}
        where cluster_id = #{clusterId,jdbcType=VARCHAR}
    </update>
    <update id="updateHostGroupSpotStateByClusterIdAndGroupName">
        update conf_cluster_host_group
        set spot_state = #{spotState,jdbcType=INTEGER}
        where cluster_id = #{clusterId,jdbcType=VARCHAR} and group_name =#{groupName,jdbcType=VARCHAR}
    </update>
</mapper>