{"version":3,"sources":["webpack:///./src/views/task-center/index.vue?97e9","webpack:///./src/components/js/shortcuts.js","webpack:///./src/views/task-center/index.vue","webpack:///./src/views/task-center/index.vue?bfec"],"names":["shortcuts","text","value","end","Date","start","setTime","getTime","pageLoading","ref","filters","useRouter","type","key","props","selOptionType","options","label","clearable","d","getList","data","taskCenterApi","list","TabelContainer","searchEvent","arr","time","length","begTime","endTime","filterEvent","resetEvent","dialogVisible","detailData","showDetail","item","getjobdetail","planId","then","res","result","ElMessage","error","errorMsg","finally","__exports__"],"mappings":"kHAAA,W,qHCAO,MAAMA,EAAY,CACvB,CACEC,KAAM,KACNC,MAAO,KACL,MAAMC,EAAM,IAAIC,KACVC,EAAQ,IAAID,KAClB,MAAO,CAACC,EAAOF,KAGnB,CACEF,KAAM,MACNC,MAAO,KACL,MAAMC,EAAM,IAAIC,KACVC,EAAQ,IAAID,KAElB,OADAC,EAAMC,QAAQD,EAAME,UAAY,QACzB,CAACF,EAAOF,KAGnB,CACEF,KAAM,MACNC,MAAO,KACL,MAAMC,EAAM,IAAIC,KACVC,EAAQ,IAAID,KAElB,OADAC,EAAMC,QAAQD,EAAME,UAAY,QACzB,CAACF,EAAOF,KAGnB,CACEF,KAAM,OACNC,MAAO,KACL,MAAMC,EAAM,IAAIC,KACVC,EAAQ,IAAID,KAElB,OADAC,EAAMC,QAAQD,EAAME,UAAY,SACzB,CAACF,EAAOF,M,uRC6DnB,MAAMK,EAAcC,kBAAI,GAIlBC,GAFSC,iBAECF,iBAAI,CAClB,CACEG,KAAM,YACNC,IAAK,cACLC,MAAO,GACPC,cAAe,GACfC,QAAS,CACP,CACE,KAAQ,WACR,MAAS,OACT,MAAS,GACT,IAAO,cACP,MAAS,CAAC,YAAe,UAAW,WAAa,IAEnD,CACE,KAAQ,WACR,MAAS,OACT,MAAS,GACT,IAAO,YACP,MAAS,CAAC,YAAe,UAAW,WAAa,MAIvD,CACEJ,KAAM,iBACNK,MAAO,KACPJ,IAAK,OACLC,MAAO,CACLF,KAAM,gBACN,kBAAmB,IACnBM,WAAW,EACX,oBAAqB,OACrB,kBAAmB,OACnBlB,UAAWA,EACX,eAAgB,aAChB,gBAAkBmB,KACZA,EAAI,IAAIf,OAMhBW,cAAe,OAInB,SAASK,EAAQC,GACf,OAAOC,OAAcC,KAAKF,GAG5B,MAAMG,EAAiBf,iBAAI,MAE3B,SAASgB,EAAYJ,GACnB,IAAIK,EAAML,EAAKM,MAAQ,GAEL,GAAdD,EAAIE,QACNP,EAAKQ,QAAUH,EAAI,GACnBL,EAAKS,QAAUJ,EAAI,KAEnBL,EAAKQ,QAAU,GACfR,EAAKS,QAAU,IAEjBN,EAAetB,MAAM6B,YAAYV,GAGnC,SAASW,EAAWX,GAClBI,EAAYJ,GAGd,MAAMY,EAAgBxB,kBAAI,GAEpByB,EAAazB,iBAAI,IAEvB,SAAS0B,EAAWC,GAClB5B,EAAYN,OAAQ,EACpBoB,OAAce,aAAa,CAACC,OAAQF,EAAKE,SAASC,KAAKC,IACnC,GAAdA,EAAIC,QACNP,EAAWhC,MAAQsC,EAAInB,KACvBY,EAAc/B,OAAQ,GAEtBwC,OAAUC,MAAMH,EAAII,YAErBC,QAAQ,KACTrC,EAAYN,OAAQ,I,0qFC/K1B,MAAM4C,EAA2B,IAAgB,EAAQ,CAAC,CAAC,YAAY,qBAExD,gB","file":"js/chunk-fea36a02.886c350e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=3c6f7bb3&lang=stylus&scoped=true\"","export const shortcuts = [\n  {\n    text: '今天',\n    value: () => {\n      const end = new Date()\n      const start = new Date()\n      return [start, end]\n    },\n  },\n  {\n    text: '3天内',\n    value: () => {\n      const end = new Date()\n      const start = new Date()\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 2)\n      return [start, end]\n    },\n  },\n  {\n    text: '7天内',\n    value: () => {\n      const end = new Date()\n      const start = new Date()\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 6)\n      return [start, end]\n    },\n  },\n  {\n    text: '30天内',\n    value: () => {\n      const end = new Date()\n      const start = new Date()\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 29)\n      return [start, end]\n    },\n  },\n]\n\n","/**Created by liaoyingchao on 12/1/22.*/\n\n<template>\n  <div class=\"index page-css list-css\" v-loading=\"pageLoading\">\n    <Filters :filters=\"filters\" @onSearch=\"searchEvent\" @onReset=\"resetEvent\"></Filters>\n    <div class=\"full-container\">\n      <ListContainer ref=\"TabelContainer\" :listApiFunction=\"getList\">\n        <template #default=\"tableData\">\n          <el-table\n                  :height=\"tableData.data.tableHeight\"\n                  :data=\"tableData.data.tableData\"\n                  stripe\n                  header-row-class-name=\"theader\"\n                  style=\"width: 100%\">\n            <el-table-column\n                    prop=\"jobName\"\n                    label=\"任务名称/ID\"\n                    min-width=\"120\">\n              <template #default=\"scope\">\n                <div class=\"task-info\">\n                  <div class=\"task-name\">{{ scope.row.jobName }}</div>\n                  <div class=\"task-id\">{{ scope.row.planId }}</div>\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column\n                    prop=\"clusterName\"\n                    label=\"集群名称/ID\"\n                    min-width=\"140\">\n              <template #default=\"scope\">\n                <div class=\"cluster-info\">\n                  <div class=\"cluster-name\">{{ scope.row.clusterName }}</div>\n                  <div class=\"cluster-id\">{{ scope.row.clusterId }}</div>\n                </div>\n              </template>\n            </el-table-column>\n            <el-table-column\n                    prop=\"state\"\n                    label=\"状态\"\n                    width=\"100\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"begTime\"\n                    label=\"开始时间\"\n                    min-width=\"120\">\n            </el-table-column>\n            <el-table-column\n                    prop=\"endTime\"\n                    label=\"结束时间\"\n                    min-width=\"120\">\n            </el-table-column>\n            <el-table-column\n                    fixed=\"right\"\n                    label=\"管理\"\n                    width=\"100\">\n              <template #default=\"scope\">\n                <div>\n                  <el-button type=\"primary\" text @click=\"showDetail(scope.row)\">任务详情</el-button>\n                </div>\n              </template>\n            </el-table-column>\n          </el-table>\n        </template>\n      </ListContainer>\n    </div>\n    <el-dialog\n            class=\"center-dialog\"\n            v-model=\"dialogVisible\"\n            title=\"任务详情\"\n            width=\"900\"\n            destroy-on-close\n    >\n      <div>\n        <TaskDetail :detailData=\"detailData\"></TaskDetail>\n      </div>\n      <template #footer>\n        <div class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">关闭</el-button>\n        </div>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script setup>\n  import Filters from '@/components/list-comps/filters'\n  import ListContainer from '@/components/list-comps/container'\n  import {ref} from 'vue'\n  import {useRouter} from 'vue-router'\n  import taskCenterApi from '@/api/task-center'\n  import {ElMessage, ElMessageBox} from 'element-plus';\n  import {shortcuts} from \"../../components/js/shortcuts\";\n  import TaskDetail from \"./detail\"\n\n  const pageLoading = ref(false)\n\n  const router = useRouter();\n\n  const filters = ref([\n    {\n      type: 'combo-box',\n      key: 'clusterName',\n      props: {},\n      selOptionType: '',\n      options: [\n        {\n          \"type\": \"el-input\",\n          \"label\": \"集群名称\",\n          \"rules\": [],\n          \"key\": \"clusterName\",\n          \"props\": {\"placeholder\": \"请输入集群名称\", \"clearable\": true}\n        },\n        {\n          \"type\": \"el-input\",\n          \"label\": \"集群ID\",\n          \"rules\": [],\n          \"key\": \"clusterId\",\n          \"props\": {\"placeholder\": \"请输入集群ID\", \"clearable\": true}\n        }\n      ]\n    },\n    {\n      type: 'el-date-picker',\n      label: \"时间\",\n      key: 'time',\n      props: {\n        type: \"datetimerange\",\n        \"range-separator\": \"至\",\n        clearable: true,\n        \"start-placeholder\": \"开始日期\",\n        \"end-placeholder\": \"结束日期\",\n        shortcuts: shortcuts,\n        \"value-format\": \"YYYY-MM-DD\",\n        \"disabled-date\": (d) => {\n          if (d < new Date()) {\n            return false;\n          }\n          return true;\n        }\n      },\n      selOptionType: '',\n    }\n  ])\n\n  function getList(data) {\n    return taskCenterApi.list(data)\n  }\n\n  const TabelContainer = ref(null)\n\n  function searchEvent(data) {\n    let arr = data.time || []\n\n    if (arr.length == 2) {\n      data.begTime = arr[0]\n      data.endTime = arr[1]\n    } else {\n      data.begTime = ''\n      data.endTime = ''\n    }\n    TabelContainer.value.filterEvent(data);\n  }\n\n  function resetEvent(data) {\n    searchEvent(data)\n  }\n\n  const dialogVisible = ref(false)\n\n  const detailData = ref({})\n\n  function showDetail(item) {\n    pageLoading.value = true\n    taskCenterApi.getjobdetail({planId: item.planId}).then(res => {\n      if (res.result == true) {\n        detailData.value = res.data\n        dialogVisible.value = true\n      } else {\n        ElMessage.error(res.errorMsg)\n      }\n    }).finally(() => {\n      pageLoading.value = false\n    })\n  }\n</script>\n\n<style lang=\"stylus\" scoped type=\"text/stylus\">\n  .index {\n    .cluster-info {\n      .cluster-name {\n        font-size 14px;\n      }\n\n      .cluster-id {\n        font-size 12px;\n      }\n    }\n    .task-info {\n      .task-name {\n        font-size 14px;\n      }\n\n      .task-id {\n        font-size 12px;\n      }\n    }\n\n    >>> .center-dialog {\n\n    }\n  }\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=3c6f7bb3&lang=stylus&scoped=true\"\n\nimport exportComponent from \"/Users/liaoyingchao/sourcetree/sdp-magement-web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3c6f7bb3\"]])\n\nexport default __exports__"],"sourceRoot":""}