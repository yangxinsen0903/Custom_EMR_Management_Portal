(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-860b2b08"],{"00ee":function(e,t,a){var l=a("b622"),c=l("toStringTag"),r={};r[c]="z",e.exports="[object z]"===String(r)},"0a87":function(e,t,a){"use strict";a("91bc")},"0d26":function(e,t,a){var l=a("e330"),c=Error,r=l("".replace),o=function(e){return String(c(e).stack)}("zxcasd"),n=/\n\s*at [^:]*:[^\n]*/,i=n.test(o);e.exports=function(e,t){if(i&&"string"==typeof e&&!c.prepareStackTrace)while(t--)e=r(e,n,"");return e}},"0db7":function(e,t,a){},"0efa":function(e,t,a){"use strict";a("d815")},"2ba4":function(e,t,a){var l=a("40d5"),c=Function.prototype,r=c.apply,o=c.call;e.exports="object"==typeof Reflect&&Reflect.apply||(l?o.bind(r):function(){return o.apply(r,arguments)})},"3bbe":function(e,t,a){var l=a("1626"),c=String,r=TypeError;e.exports=function(e){if("object"==typeof e||l(e))return e;throw r("Can't set "+c(e)+" as a prototype")}},"456a":function(e,t,a){"use strict";a("d766")},"577e":function(e,t,a){var l=a("f5df"),c=String;e.exports=function(e){if("Symbol"===l(e))throw TypeError("Cannot convert a Symbol value to a string");return c(e)}},"5ef7":function(e,t,a){},"615f":function(e,t,a){"use strict";a("6277")},6277:function(e,t,a){},7072:function(e,t,a){},7156:function(e,t,a){var l=a("1626"),c=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var o,n;return r&&l(o=t.constructor)&&o!==a&&c(n=o.prototype)&&n!==a.prototype&&r(e,n),e}},"765e":function(e,t,a){"use strict";a.r(t);var l=a("7a23"),c=a("f6f2");function r(e,t="modelValue",a){const c=Object(l["getCurrentInstance"])(),r=a||(null===c||void 0===c?void 0:c.emit),o="update:"+t,n=Object(l["computed"])({get:()=>e[t],set:e=>{r(o,e)}});return n}const o=e=>(Object(l["pushScopeId"])("data-v-75057807"),e=e(),Object(l["popScopeId"])(),e),n={class:"steps"},i=["onClick"],u={key:0,class:"icon editing"},d={key:1,class:"icon finished"},s={key:2,class:"icon"},b=o(()=>Object(l["createElementVNode"])("div",{class:"line"},null,-1));var m={__name:"steps",props:{modelValue:Number,stepOptions:{type:Array,default:()=>[]}},setup(e,{emit:t}){const a=e,{stepOptions:o}=Object(l["toRefs"])(a),m=r(a);function p(e){m.value>e&&(m.value=e)}return(e,t)=>{const a=Object(l["resolveComponent"])("el-icon");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",n,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(Object(l["unref"])(o),(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["step-item",{full:t<Object(l["unref"])(o).length-1}]),key:t},[Object(l["createElementVNode"])("div",{class:"content",onClick:e=>p(t)},[Object(l["unref"])(m)==t?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",u,Object(l["toDisplayString"])(t+1),1)):Object(l["unref"])(m)>t?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",d,[Object(l["createVNode"])(a,{size:"24",color:"#535E85"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(c["h"]))]),_:1})])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",s,Object(l["toDisplayString"])(t+1),1)),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["title",{editing:Object(l["unref"])(m)==t}])},Object(l["toDisplayString"])(e.name),3)],8,i),b],2))),128))])}}},p=(a("0a87"),a("d959")),j=a.n(p);const O=j()(m,[["__scopeId","data-v-75057807"]]);var v=O;a("d9e2");const f={required:function(e="请输入必填项",t="blur"){return{required:!0,message:e,trigger:t}},justChineseNumberLetter:function(e="仅支持中文、数字、字母",t="blur"){return{validator:(t,a,l)=>{if(""===a||void 0===a||null===a)return l();var c=/^[\u4e00-\u9fa5a-zA-Z0-9]*$/;return c.test(a)?l():l(new Error(e))},trigger:t}},justNumber:function(e="仅支持数字",t="blur"){return{validator:(t,a,l)=>{if(""===a||void 0===a||null===a)return l();var c=/^(-)[0-9.]|^[0-9.]*$/;return c.test(a)?l():l(new Error(e))},trigger:t}},justPrice:function(e="仅支持数字",t="blur"){return{validator:(t,a,l)=>{if(""===a||void 0===a||null===a)return l();var c=/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,2})?$/;return c.test(a)?l():l(new Error(e))},trigger:t}},justPositiveInt(e="仅支持正整数",t="blur"){return{validator:(t,a,l)=>{if(""===a||void 0===a||null===a)return l();let c=/^[1-9][0-9]*$/;return c.test(a)?l():l(new Error(e))},trigger:t}},justNaturalNumber(e="仅支持自然数",t="blur"){return{validator:(t,a,l)=>{if(""===a||void 0===a||null===a)return l();let c=/^[0-9]|^[1-9][0-9]*$/;return c.test(a)?l():l(new Error(e))},trigger:t}},complexPassword(e="应包含数字、大小写英文、特殊符号",t="blur"){return{validator:(t,a,l)=>{if(""===a||void 0===a||null===a)return l();let c=/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z0-9])[\S]/;return c.test(a)?l():l(new Error(e))},trigger:t}},justLetterAndNumber:function(e="仅支持字母和数字",t="blur"){return{validator:(t,a,l)=>{var c=/^[0-9a-zA-Z]*$/;return c.test(a)?l():l(new Error(e))},trigger:t}},justLetterAndNumberAnd_:function(e="仅支持字母、数字和-，并且不能以-开头",t="blur"){return{validator:(t,a,l)=>{var c=/^[0-9a-zA-Z][0-9a-zA-Z\-]*$/;return c.test(a)?l():l(new Error(e))},trigger:t}},justPhone:function(e="请输入正确的手机号",t="blur"){return{validator:(t,a,l)=>{if(""==a)return l();var c=/^1\d{10}$/;return c.test(a)?l():l(new Error(e))},trigger:t}},justIdCard:function(e="请输入正确的身份证号码",t="blur"){return{validator:(t,a,l)=>{if(""==a)return l();var c=/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}$)/;return c.test(a)?l():l(new Error(e))},trigger:t}},justEmail:function(e="请输入正确的电子邮件",t="blur"){return{validator:(t,a,l)=>{if(""==a)return l();var c=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;return c.test(a)?l():l(new Error(e))},trigger:t}},lengthLimit:function(e=0,t=11,a="blur"){return{validator:(a,l,c)=>{let r=l+"";return r.length<e?c(new Error(`长度不能低于${e}位`)):r.length>t?c(new Error(`长度不能超过${t}位`)):c()},trigger:a}},valueIn:function(e=1,t=4,a="blur"){return{validator:(a,l,c)=>""===l||void 0==l||null==l?c():l<e||l>t?c(new Error(`请输入${e}到${t}中的数字`)):c(),trigger:a}},isPhone:function(e="请输入合法电话号码（包含区号，使用-间隔）",t="blur"){let a=/^((0\d{2,3}-\d{7,8})|(1[3584]\d{9}))$/;return{validator:(t,l,c)=>a.test(l)?c():c(new Error(e)),trigger:t}},isValidIP:function(e="请输入合法的IP地址",t="blur"){let a=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;return{validator:(t,l,c)=>a.test(l)?c():c(new Error(e)),trigger:t}},tankFormRulesAndPrefix:function(e){let t=this.tankFormRules(),a={};for(let l in t){let c=t[l],r=e+l.charAt(0).toUpperCase()+l.slice(1);a[r]=c}return a}};var V=f,g=(a("14d9"),a("7ea2")),N=a("3ef4");const h={class:"label"},k={class:"label-row"},w={class:"label-input"},C={class:"label-input"},y={class:"label-btn"},E={style:{width:"100%","padding-right":"50px"}};var x={__name:"label",props:{modelValue:Object},setup(e,{emit:t}){const a=e,o=r(a),n=Object(l["ref"])([]),i=Object(l["ref"])([]);function u(){i.value=[];for(let e in o.value)e&&i.value.push({key:e,value:o.value[e]});0==i.value.length&&i.value.push({key:"",value:""}),s()}function d(){for(let e in o.value)delete o.value[e];i.value.forEach(e=>{e.key&&(o.value[e.key]=e.value||"")})}function s(){n.value.forEach(e=>{let t=e.dictValue;void 0!=o.value[t]?e.disabled=!0:e.disabled=!1})}function b(e){d()}function m(e){e.value="",d(),s(),j(e.key)}const p=Object(l["ref"])({});function j(e){p.value[e]&&p.value[e].length||g["a"].getTagValueList({tagKey:e}).then(t=>{1==t.result?p.value[e]=t.data:N["a"].error(t.message)})}function O(){i.value.push({key:"",value:""})}function v(e){let t=i.value[e],a=t.key;a&&(delete o.value[a],s()),i.value.splice(e,1)}function f(){g["a"].gettagKeyList().then(e=>{1==e.result?(n.value=e.data,u()):N["a"].error(e.errorMsg)})}return f(),(e,t)=>{const a=Object(l["resolveComponent"])("el-option"),r=Object(l["resolveComponent"])("el-select"),o=Object(l["resolveComponent"])("el-button");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",h,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(i.value,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",k,[Object(l["createElementVNode"])("div",w,[Object(l["createVNode"])(r,{style:{width:"100%"},placeholder:"请选择标签key",modelValue:e.key,"onUpdate:modelValue":t=>e.key=t,onChange:t=>m(e),filterable:"","allow-create":"","default-first-option":""},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(n.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.dictValue,label:e.dictName,value:e.dictValue,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),Object(l["createElementVNode"])("div",C,[Object(l["createVNode"])(r,{style:{width:"100%"},placeholder:"请选择/输入标签值",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,onChange:t=>b(e),filterable:"","allow-create":"","default-first-option":""},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(p.value[e.key],e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.tagVal,label:e.tagVal,value:e.tagVal},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),Object(l["createElementVNode"])("div",y,[Object(l["createVNode"])(o,{text:"",icon:Object(l["unref"])(c["d"]),circle:"",onClick:e=>v(t)},null,8,["icon","onClick"])])]))),256)),Object(l["createElementVNode"])("div",E,[n.value.length>i.value.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:0,class:"add-btn",onClick:O},"添加标签")):Object(l["createCommentVNode"])("",!0)])])}}};a("456a");const S=j()(x,[["__scopeId","data-v-3788d12e"]]);var _=S;const B=e=>(Object(l["pushScopeId"])("data-v-fc26ba98"),e=e(),Object(l["popScopeId"])(),e),D={class:"step-1"},T={class:"full-page-block-div"},G=B(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"基本配置",-1)),U={class:"full-page-buttons"};var z={__name:"step-1",props:{modelValue:Object},setup(e,{emit:t}){const a=e,c=r(a),o=Object(l["ref"])(null);function n(){return{validator:(e,t,a)=>{t?g["a"].checkClusterName({clusterName:t}).then(e=>{1==e.result?a():a(new Error("集群名称已存在！"))}):a()},trigger:"blur"}}const i={clusterName:[V.required("请输入集群名称"),V.justLetterAndNumberAnd_(),n()]};function u(){o.value.validate((e,a)=>{if(e){for(let e in c.value.tagMap)c.value.tagMap[e]||delete c.value.tagMap[e];t("changeStep",1)}else console.log("error submit!",a)})}return(e,t)=>{const a=Object(l["resolveComponent"])("el-input"),r=Object(l["resolveComponent"])("el-form-item"),n=Object(l["resolveComponent"])("el-form"),d=Object(l["resolveComponent"])("el-button");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",D,[Object(l["createVNode"])(n,{size:"large",ref_key:"RefForm",ref:o,model:Object(l["unref"])(c),rules:i,"label-width":"120px"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",T,[G,Object(l["createVNode"])(r,{label:"集群名称",prop:"clusterName"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(a,{class:"input-width",modelValue:Object(l["unref"])(c).clusterName,"onUpdate:modelValue":t[0]||(t[0]=e=>Object(l["unref"])(c).clusterName=e),placeholder:"请输入集群名称","show-word-limit":"",maxlength:"15",clearable:""},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(r,{label:"标签",prop:"tagMap"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(_),{modelValue:Object(l["unref"])(c).tagMap,"onUpdate:modelValue":t[1]||(t[1]=e=>Object(l["unref"])(c).tagMap=e)},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"]),Object(l["createElementVNode"])("div",U,[Object(l["createVNode"])(d,{type:"primary",size:"large",class:"next-step",onClick:u},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("下一步")]),_:1})])])}}};a("0efa");const R=j()(z,[["__scopeId","data-v-fc26ba98"]]);var P=R;const M=e=>(Object(l["pushScopeId"])("data-v-2613261c"),e=e(),Object(l["popScopeId"])(),e),L={class:"arguments"},I={class:"arguments-row"},A={class:"label-input"},q=M(()=>Object(l["createElementVNode"])("div",{class:"label single-row"},"分类：",-1)),F={class:"arguments-items"},$={class:"item-row"},H={class:"label-input",style:{"margin-left":"10px"}},Z=M(()=>Object(l["createElementVNode"])("div",{class:"label single-row"},"参数：",-1)),K={class:"label-input"},J=M(()=>Object(l["createElementVNode"])("div",{class:"label"},"值：",-1)),W=["onUpdate:modelValue","onChange"],X={class:"label-btn"},Q={class:"item-row",style:{"margin-bottom":"0",padding:"4px 0"}},Y=["onClick"];var ee={__name:"arguments",props:{modelValue:Object},setup(e,{emit:t}){const a=e,o=r(a),n=Object(l["ref"])([]);function i(){o.value.forEach(e=>{e.confs=[];for(let t in e.cfg)e.confs.push({key:t,value:e.cfg[t]})})}function u(e){O(e)}function d(){s()}function s(){n.value.forEach(e=>{let t=e.dictValue,a=o.value.findIndex(e=>e.classification==t);e.disabled=a>-1})}function b(){o.value.push({classification:"",cfg:{},confs:[]})}function m(e){o.value.splice(e,1),s()}function p(e){e.confs.push({key:"",value:""}),O(e)}function j(e,t){e.confs.splice(t,1),O(e)}function O(e){let t=e.confs||[];e.cfg={},t.forEach(t=>{t.key&&(e.cfg[t.key]=t.value)})}function v(){g["a"].getClassificationList().then(e=>{1==e.result?n.value=e.data:N["a"].error(e.errorMsg)})}return i(),v(),(e,t)=>{const a=Object(l["resolveComponent"])("el-option"),r=Object(l["resolveComponent"])("el-select"),i=Object(l["resolveComponent"])("el-input"),s=Object(l["resolveComponent"])("el-button");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",L,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(Object(l["unref"])(o),(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",I,[Object(l["createElementVNode"])("div",A,[q,Object(l["createVNode"])(r,{style:{width:"100%"},modelValue:e.classification,"onUpdate:modelValue":t=>e.classification=t,onChange:d},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(n.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.dictValue,label:e.dictName,value:e.dictValue,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),Object(l["createElementVNode"])("div",F,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.confs,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",$,[Object(l["createElementVNode"])("div",H,[Z,Object(l["createVNode"])(i,{modelValue:t.key,"onUpdate:modelValue":e=>t.key=e,placeholder:"请输入参数",maxlength:"300","show-word-limit":"",clearable:"",onChange:t=>u(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),Object(l["createElementVNode"])("div",K,[J,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":e=>t.value=e,placeholder:"请输入值",onChange:t=>u(e),style:{width:"100%",resize:"none"}},null,40,W),[[l["vModelText"],t.value]])]),Object(l["createElementVNode"])("div",X,[Object(l["createVNode"])(s,{text:"",plain:"",icon:Object(l["unref"])(c["d"]),circle:"",onClick:t=>j(e,a)},null,8,["icon","onClick"])])]))),256)),Object(l["createElementVNode"])("div",Q,[Object(l["createElementVNode"])("div",{style:{"margin-left":"50px"},class:"add-btn",onClick:t=>p(e)},"添加参数",8,Y),Object(l["createVNode"])(s,{name:"移除配置",style:{margin:"0 2px 0 20px"},text:"",plain:"",icon:Object(l["unref"])(c["d"]),circle:"",onClick:e=>m(t)},null,8,["icon","onClick"])])])]))),256)),n.value.length>Object(l["unref"])(o).length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:0,class:"add-btn",onClick:b},"添加配置分类")):Object(l["createCommentVNode"])("",!0)])}}};a("c214");const te=j()(ee,[["__scopeId","data-v-2613261c"]]);var ae=te;const le=e=>(Object(l["pushScopeId"])("data-v-ab6d7982"),e=e(),Object(l["popScopeId"])(),e),ce={class:"step-2"},re={class:"full-page-block-div"},oe=le(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"集群版本",-1)),ne={class:"plugin-div"},ie=["onClick"],ue={class:"text"},de={key:0,class:"select-div"},se={class:"full-page-block-div"},be=le(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"组件配置",-1)),me={class:"full-page-block-div"},pe=le(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"高级设置",-1)),je=le(()=>Object(l["createElementVNode"])("div",{class:"from-item-tip"},"表格中的所有脚本会根据时机，从上往下执行",-1)),Oe={class:"full-page-buttons"},ve={class:"dialog-content"},fe=le(()=>Object(l["createElementVNode"])("div",{class:"from-item-tip"},"长度限制为1-64个字符，只能包含中文、字母、数字",-1)),Ve=le(()=>Object(l["createElementVNode"])("div",{class:"from-item-tip"},"请使用对象存储标准存储方式，脚本示例：https://sbxdevsa.dfs.core.windows.net/sdp/test.sh",-1)),ge=le(()=>Object(l["createElementVNode"])("div",{class:"from-item-tip"},"脚本会按照运行时机，然后按照执行顺序执行，执行顺序数值越小越早执行",-1)),Ne=le(()=>Object(l["createElementVNode"])("div",{class:"from-item-tip"},"参数格式请遵循标准Shell规范",-1)),he={class:"dialog-footer"};var ke={__name:"step-2",props:{modelValue:Object},setup(e,{emit:t}){const a=e,o=r(a),n=Object(l["ref"])(null),i={"instanceGroupVersion.clusterReleaseVer":V.required("请选择产品版本"),ambariUsername:V.required("请输入Ambari用户名"),ambariPassword:[V.required("请输入Ambari密码"),V.lengthLimit(6,20),V.complexPassword()]};function u(){n.value.validate((e,a)=>{e?t("changeStep",2):(N["a"].error("部分填写数据出错，请检查填写数据！"),console.log("error submit!",a))})}function d(){t("changeStep",0)}const s=Object(l["ref"])([]);function b(){g["a"].getReleases().then(e=>{1==e.result?(s.value=e.data,o.value.instanceGroupVersion.clusterReleaseVer||s.value.length>0&&(o.value.instanceGroupVersion.clusterReleaseVer=s.value[0].releaseVersion,p())):N["a"].error(e.errorMsg)})}b();const m=Object(l["ref"])([]);function p(){g["a"].getReleaseApps({releaseVersion:o.value.instanceGroupVersion.clusterReleaseVer}).then(e=>{if(1==e.result){m.value=e.data;let t=o.value.instanceGroupVersion.clusterApps;t.length?m.value.forEach(e=>{let a=t.findIndex(t=>e.appName==t.app_name&&e.appVerison==t.app_version);a>-1&&(e.selected=!0)}):(m.value.forEach(e=>{"1"==e.required&&(e.selected=!0)}),v())}else N["a"].error(e.errorMsg)})}function j(){p()}function O(e){"1"!=e.required&&(e.selected=!e.selected,v())}function v(){let e=[];m.value.forEach(t=>{t.selected&&e.push({app_name:t.appName,app_version:t.appVerison})}),console.log(e),o.value.instanceGroupVersion.clusterApps=e}o.value.instanceGroupVersion.clusterReleaseVer&&p();let f=Object(l["ref"])(!1);const h=Object(l["reactive"])({scriptName:"",runTiming:"节点初始化后",scriptPath:"",sortNo:1,scriptParam:"",editIndex:-1}),k={scriptName:[V.required("请输入脚本名称"),V.justChineseNumberLetter()],scriptPath:V.required("请输入脚本路径"),sortNo:[V.required("请输入执行顺序"),V.justPositiveInt()],runTiming:V.required("请选择运行时间")},w=Object(l["ref"])(null);function C(){h.scriptName="",h.runTiming="节点初始化后",h.scriptPath="",h.sortNo=1,h.scriptParam="",h.editIndex=-1,y.value.length<16?h.runTiming="节点初始化后":E.value.length<16?h.runTiming="集群启动前":h.runTiming="集群启动后",f.value=!0}const y=Object(l["computed"])(()=>{let e=o.value.confClusterScript.filter(e=>"节点初始化后"==e.runTiming);return e}),E=Object(l["computed"])(()=>{let e=o.value.confClusterScript.filter(e=>"集群启动前"==e.runTiming);return e}),x=Object(l["computed"])(()=>{let e=o.value.confClusterScript.filter(e=>"集群启动后"==e.runTiming);return e}),S={"节点初始化后":1,"集群启动前":2,"集群启动后":3};function _(){w.value.validate((e,t)=>{if(e){let e={scriptName:h.scriptName,runTiming:h.runTiming,scriptPath:h.scriptPath,sortNo:h.sortNo,scriptParam:h.scriptParam};h.editIndex>-1?o.value.confClusterScript.splice(h.editIndex,1,e):o.value.confClusterScript.push(e),f.value=!1,o.value.confClusterScript=o.value.confClusterScript.sort((e,t)=>{if(e.runTiming!=t.runTiming){let a=S[e.runTiming],l=S[t.runTiming];return console.log(a,l),a-l}return e.sortNo-t.sortNo}),console.log(o.value.confClusterScript)}else console.log("error submit!",t)})}function B(e,t){h.scriptName=e.scriptName,h.runTiming=e.runTiming,h.scriptPath=e.scriptPath,h.sortNo=e.sortNo,h.scriptParam=e.scriptParam,h.editIndex=t,f.value=!0}function D(e){o.value.confClusterScript.splice(e,1)}return(e,t)=>{const a=Object(l["resolveComponent"])("el-option"),r=Object(l["resolveComponent"])("el-select"),b=Object(l["resolveComponent"])("el-form-item"),p=Object(l["resolveComponent"])("el-icon"),v=Object(l["resolveComponent"])("el-switch"),V=Object(l["resolveComponent"])("el-table-column"),g=Object(l["resolveComponent"])("el-button"),N=Object(l["resolveComponent"])("el-table"),S=Object(l["resolveComponent"])("el-form"),T=Object(l["resolveComponent"])("el-radio-button"),G=Object(l["resolveComponent"])("el-radio-group"),U=Object(l["resolveComponent"])("el-input"),z=Object(l["resolveComponent"])("el-dialog");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ce,[Object(l["createVNode"])(S,{size:"large",ref_key:"RefForm",ref:n,model:Object(l["unref"])(o),rules:i,"label-width":"120px"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",re,[oe,Object(l["createVNode"])(b,{label:"产品版本",prop:"instanceGroupVersion.clusterReleaseVer"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{class:"input-width",placeorder:"请选择产品版本",modelValue:Object(l["unref"])(o).instanceGroupVersion.clusterReleaseVer,"onUpdate:modelValue":t[0]||(t[0]=e=>Object(l["unref"])(o).instanceGroupVersion.clusterReleaseVer=e),onChange:j},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.releaseVersion,label:e.releaseDescription,value:e.releaseVersion},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["prop"]),m.value.length?(Object(l["openBlock"])(),Object(l["createBlock"])(b,{key:0,label:"组件选择"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",ne,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(m.value,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["plugin-item",{disabled:"1"==e.required}]),onClick:t=>O(e)},[Object(l["createElementVNode"])("div",ue,Object(l["toDisplayString"])(e.appName)+Object(l["toDisplayString"])(e.appVerison),1),e.selected?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",de,[Object(l["createVNode"])(p,{color:"#fff",size:"12px"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(c["b"]))]),_:1})])):Object(l["createCommentVNode"])("",!0)],10,ie))),256))])]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",se,[be,Object(l["createVNode"])(b,{label:"参数配置"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(Object(l["unref"])(ae),{modelValue:Object(l["unref"])(o).clusterCfgs,"onUpdate:modelValue":t[1]||(t[1]=e=>Object(l["unref"])(o).clusterCfgs=e)},null,8,["modelValue"])]),_:1})]),Object(l["createElementVNode"])("div",me,[pe,Object(l["createVNode"])(b,{label:"关闭保护"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(v,{modelValue:Object(l["unref"])(o).deleteProtected,"onUpdate:modelValue":t[2]||(t[2]=e=>Object(l["unref"])(o).deleteProtected=e),"inline-prompt":"","active-text":"on","inactive-text":"off","active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(b,{label:"初始化脚本"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(N,{data:Object(l["unref"])(o).confClusterScript,"header-row-class-name":"theader",border:"",style:{width:"100%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(V,{prop:"runTiming",label:"运行时机","min-width":"100"}),Object(l["createVNode"])(V,{prop:"scriptName",label:"名称","min-width":"100"}),Object(l["createVNode"])(V,{prop:"scriptPath",label:"脚本位置","min-width":"100"}),Object(l["createVNode"])(V,{prop:"sortNo",label:"执行顺序",width:"100"}),Object(l["createVNode"])(V,{prop:"scriptParam",label:"参数","min-width":"100"}),Object(l["createVNode"])(V,{prop:"name",label:"操作",width:"140"},{default:Object(l["withCtx"])(e=>[Object(l["createVNode"])(g,{type:"primary",text:"",size:"small",onClick:t=>B(e.row,e.$index)},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("编辑")]),_:2},1032,["onClick"]),Object(l["createVNode"])(g,{type:"danger",text:"",size:"small",onClick:t=>D(e.$index)},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),je,Object(l["unref"])(o).confClusterScript.length<48?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:0,style:{"margin-top":"8px"},class:"add-btn",onClick:C},"添加引导操作")):Object(l["createCommentVNode"])("",!0)]),_:1})])]),_:1},8,["model"]),Object(l["createElementVNode"])("div",Oe,[Object(l["createVNode"])(g,{class:"pre-step",size:"large",onClick:d},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("上一步")]),_:1}),Object(l["createVNode"])(g,{type:"primary",size:"large",class:"next-step",onClick:u},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("下一步")]),_:1})]),Object(l["createVNode"])(z,{class:"center-dialog",modelValue:Object(l["unref"])(f),"onUpdate:modelValue":t[9]||(t[9]=e=>Object(l["isRef"])(f)?f.value=e:f=e),title:"操作引导",width:"800","destroy-on-close":""},{footer:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",he,[Object(l["createVNode"])(g,{onClick:t[8]||(t[8]=e=>Object(l["isRef"])(f)?f.value=!1:f=!1)},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("取消")]),_:1}),Object(l["createVNode"])(g,{type:"primary",onClick:_},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("保存")]),_:1})])]),default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",ve,[Object(l["createVNode"])(S,{ref_key:"Ref_editForm",ref:w,model:h,rules:k,"label-width":"120px",style:{width:"90%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(b,{label:"运行时机",prop:"runTiming"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(G,{modelValue:h.runTiming,"onUpdate:modelValue":t[3]||(t[3]=e=>h.runTiming=e)},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(T,{label:"节点初始化后",disabled:16==Object(l["unref"])(y).length},null,8,["disabled"]),Object(l["createVNode"])(T,{label:"集群启动前",disabled:16==Object(l["unref"])(E).length},null,8,["disabled"]),Object(l["createVNode"])(T,{label:"集群启动后",disabled:16==Object(l["unref"])(x).length},null,8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),Object(l["createVNode"])(b,{label:"名称",prop:"scriptName"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(U,{modelValue:h.scriptName,"onUpdate:modelValue":t[4]||(t[4]=e=>h.scriptName=e),placeholder:"请输入名称",maxlength:"64","show-word-limit":""},null,8,["modelValue"]),fe]),_:1}),Object(l["createVNode"])(b,{label:"脚本位置",prop:"scriptPath"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(U,{modelValue:h.scriptPath,"onUpdate:modelValue":t[5]||(t[5]=e=>h.scriptPath=e),placeholder:"请输入脚本位置",maxlength:"100","show-word-limit":""},null,8,["modelValue"]),Ve]),_:1}),Object(l["createVNode"])(b,{label:"执行顺序",prop:"sortNo"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(U,{modelValue:h.sortNo,"onUpdate:modelValue":t[6]||(t[6]=e=>h.sortNo=e),placeholder:"请输入执行顺序",maxlength:"2","show-word-limit":""},null,8,["modelValue"]),ge]),_:1}),Object(l["createVNode"])(b,{label:"参数",prop:"scriptParam"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(U,{modelValue:h.scriptParam,"onUpdate:modelValue":t[7]||(t[7]=e=>h.scriptParam=e),placeholder:"请输入参数",maxlength:"1000",autosize:{minRows:4,maxRows:10},type:"textarea","show-word-limit":""},null,8,["modelValue"]),Ne]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"])])}}};a("be7e");const we=j()(ke,[["__scopeId","data-v-ab6d7982"]]);var Ce=we;const ye=e=>(Object(l["pushScopeId"])("data-v-60300844"),e=e(),Object(l["popScopeId"])(),e),Ee={class:"step-3","element-loading-text":"校验数据库有效性中...."},xe={class:"full-page-block-div"},Se=ye(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"网络配置",-1)),_e=ye(()=>Object(l["createElementVNode"])("div",{class:"from-item-tip"},"master节点安全组",-1)),Be=ye(()=>Object(l["createElementVNode"])("div",{class:"from-item-tip"},"core\\task节点安全组",-1)),De={class:"full-page-block-div"},Te=ye(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"节点配置",-1)),Ge=ye(()=>Object(l["createElementVNode"])("div",{class:"from-item-tip"},"选择密钥对",-1)),Ue={key:0},ze={key:1,style:{display:"flex","align-items":"center"}},Re={style:{flex:"1"}},Pe={key:0},Me={class:"full-page-block-div"},Le=ye(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"Ambari元数据",-1)),Ie={class:"flex-row"},Ae={class:"flex-row"},qe={key:0,class:"full-page-block-div"},Fe=ye(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"Hive元数据",-1)),$e={class:"flex-row"},He={class:"flex-row"},Ze={class:"full-page-block-div"},Ke=ye(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"日志存储",-1)),Je={class:"full-page-buttons"},We={class:"dialog-content"},Xe=ye(()=>Object(l["createElementVNode"])("div",{class:"dialog-tip"},"Master节点建议选择内存较大的实例规格，推荐内容大小至少8G。磁盘建议选择云盘可以让集群获得更高的稳定性。",-1)),Qe={style:{display:"flex",width:"100%"}},Ye={class:"dialog-footer"};var et={__name:"step-3",props:{modelValue:Object},setup(e,{emit:t}){const a=e,c=r(a),o=Object(l["ref"])(!1),n=Object(l["ref"])(null),i=Object(l["ref"])(!1);function u(e,t,a){e.url&&e.account&&e.password&&e.port&&e.database?g["a"].checkConnect({url:e.url,account:e.account,password:e.password,port:e.port,database:e.database,type:t}).then(e=>{1==e.result?a(!0):a(!1,e.errorMsg)}).catch(e=>{a(!1,"检查失败！")}):a(!0)}let d=null,s=!1,b=null,m=null,p=!1,j=null;function O(e,t,a){1==e?t():t(a)}function v(e){return{validator:(t,a,l)=>{if(0==e){if(d)return void O(s,l,b);u(c.value.ambariDbCfgs,e,(e,t)=>{s=e,b=t,O(s,l,b),d=setTimeout(()=>{d=null},200)})}else{if(m)return void O(p,l,j);u(c.value.hiveMetadataDbCfgs,e,(e,t)=>{p=e,j=t,O(p,l,j),m=setTimeout(()=>{m=null},200)})}},trigger:"blur"}}const f={vNet:V.required("请选择网络","change"),subNet:V.required("请选择子网","change"),masterSecurityGroup:V.required("请选择主安全组","change"),slaveSecurityGroup:V.required("请选择子安全组","change"),"ambariDbCfgs.url":[V.required("请输入数据库主机"),v(0)],"ambariDbCfgs.account":[V.required("请输入数据库用户名"),v(0)],"ambariDbCfgs.password":[V.required("请输入数据库密码"),v(0)],"ambariDbCfgs.port":[V.required("请输入数据库端口"),v(0)],"ambariDbCfgs.database":[V.required("请输入数据库库名"),v(0)],"hiveMetadataDbCfgs.url":[V.required("请输入数据库主机"),v(1)],"hiveMetadataDbCfgs.account":[V.required("请输入数据库用户名"),v(1)],"hiveMetadataDbCfgs.password":[V.required("请输入数据库密码"),v(1)],"hiveMetadataDbCfgs.port":[V.required("请输入数据库端口"),v(1)],"hiveMetadataDbCfgs.database":[V.required("请输入数据库库名"),v(1)],keypairId:V.required("请选择登录方式","change")},h=Object(l["computed"])(()=>{let e=c.value.instanceGroupVersion.clusterApps,t=e.findIndex(e=>"Hive"==e.app_name);return t>-1});function k(){i.value=!0,o.value=!0,n.value.validate((e,a)=>{o.value=!1,e?t("changeStep",3):(N["a"].error("部分填写数据出错，请检查填写数据！"),console.log("error submit!",a)),i.value=!1})}function w(){t("changeStep",1)}const C=Object(l["ref"])([]);function y(){g["a"].getNetworkList().then(e=>{1==e.result?(C.value=e.data,C.value.length&&(c.value.vNet||(c.value.vNet=C.value[0].dictValue,E()))):N["a"].error("检查数据库连接失败！")})}function E(){let e=C.value.find(e=>e.dictValue==c.value.vNet)||{};c.value.vNetName=e.dictName}y();const x=Object(l["ref"])([]);function S(){g["a"].getSubnetList().then(e=>{1==e.result?(x.value=e.data,x.value.length&&(c.value.subNet||(c.value.subNet=x.value[0].resourceId,_()))):N["a"].error(e.errorMsg)})}function _(){let e=x.value.find(e=>e.resourceId==c.value.subNet)||{};c.value.subNetName=e.name}S();const B=Object(l["ref"])([]);function D(){g["a"].getPrimarySecurityGroupList().then(e=>{1==e.result?(B.value=e.data,B.value.length&&(c.value.masterSecurityGroup||(c.value.masterSecurityGroup=B.value[0].dictValue,T()))):N["a"].error(e.errorMsg)})}function T(){let e=B.value.find(e=>e.dictValue==c.value.masterSecurityGroup)||{};c.value.masterSecurityGroupName=e.dictName}D();const G=Object(l["ref"])([]);function U(){g["a"].getSubSecurityGroupList().then(e=>{1==e.result?(G.value=e.data,G.value.length&&(c.value.slaveSecurityGroup||(c.value.slaveSecurityGroup=G.value[0].dictValue,z()))):N["a"].error(e.errorMsg)})}function z(){let e=G.value.find(e=>e.dictValue==c.value.slaveSecurityGroup)||{};c.value.slaveSecurityGroupName=e.dictName}U();const R=Object(l["ref"])([]);function P(){g["a"].getKeypairList().then(e=>{1==e.result?R.value=e.data:N["a"].error(e.errorMsg)})}P();const M=Object(l["ref"])([]);function L(){g["a"].getOsDiskTypeList().then(e=>{1==e.result?M.value=e.data:N["a"].error(e.errorMsg)})}L();const I=Object(l["ref"])([]);function A(){g["a"].getVmskuList().then(e=>{if(1==e.result){let t=e.data||[];if(t.forEach(e=>{e.name=e.skuName+" "+e.vCPUs+"核"+e.memoryGB+"G",e.sname=e.vCPUs+"核"+e.memoryGB+"G"}),I.value=t,t.length){let e=t[0];c.value.instanceGroupSkuCfgs.forEach(t=>{t.skuName||(t.skuName=e.skuName,t.vCPUs=e.vCPUs,t.memoryGB=e.memoryGB)})}}else N["a"].error(e.errorMsg)})}A();const q=Object(l["ref"])(!0);function F(){c.value.instanceGroupSkuCfgs.forEach(e=>{e.osVolumeType=c.value.osDiskType,e.osVolumeSize=c.value.diskSize}),q.value=!1,Object(l["nextTick"])(()=>{q.value=!0})}function $(e){let t=M.value.find(t=>t.dictValue==e)||{};return t.dictName}let H=Object(l["ref"])(!1);const Z=Object(l["reactive"])({vmskuName:"",dataVolumeType:"",dataVolumeSize:"",editItem:{}}),K={vmskuName:V.required("请选择规格"),disk:{validator:(e,t,a)=>{let l=/^[1-9][0-9]*$/;return l.test(Z.dataVolumeSize)?Z.dataVolumeSize<200?a(new Error("数据盘不能小于200G！")):Z.dataVolumeSize>1e5?a(new Error("数据盘不能大于100000G！")):a():a(new Error("数据盘大小仅支持正整数"))},trigger:"blur"}},J=Object(l["ref"])(null);function W(e){console.log(e),Z.vmskuName=e.skuName+" "+e.vCPUs+"核"+e.memoryGB+"G",Z.dataVolumeType=e.dataVolumeType,Z.dataVolumeSize=e.dataVolumeSize||0,Z.editItem=e,H.value=!0}function X(){J.value.validate((e,t)=>{if(e){console.log(Z.vmskuName);let e=I.value.find(e=>e.name==Z.vmskuName)||{};if(Z.editItem.vCPUs=e.vCPUs,Z.editItem.memoryGB=e.memoryGB,Z.editItem.skuName=e.skuName,Z.editItem.dataVolumeType=Z.dataVolumeType,Z.editItem.dataVolumeSize=Z.dataVolumeSize,"Ambari"==Z.editItem.vmRole){let t=c.value.instanceGroupSkuCfgs||[],a=t.find(e=>"Master"==e.vmRole);a.vCPUs=e.vCPUs,a.memoryGB=e.memoryGB,a.skuName=e.skuName,a.dataVolumeType=Z.dataVolumeType,a.dataVolumeSize=Z.dataVolumeSize}H.value=!1}else console.log("error submit!",t)})}function Q(){if(c.value.isHa){let e=c.value.instanceGroupSkuCfgs||[],t=e.find(e=>"Master"==e.vmRole);t.cnt=2;let a=e.find(e=>"Ambari"==e.vmRole);a.cnt=1}else{let e=c.value.instanceGroupSkuCfgs||[],t=e.find(e=>"Master"==e.vmRole);t.cnt=0}}function Y({row:e,column:t,rowIndex:a,columnIndex:l}){if(1==c.value.isHa&&1===l){if(0===a)return{rowspan:2,colspan:1};if(1===a)return{rowspan:0,colspan:0}}return{rowspan:1,colspan:1}}return(e,t)=>{const a=Object(l["resolveComponent"])("el-option"),r=Object(l["resolveComponent"])("el-select"),i=Object(l["resolveComponent"])("el-form-item"),u=Object(l["resolveComponent"])("el-switch"),d=Object(l["resolveComponent"])("el-input"),s=Object(l["resolveComponent"])("el-table-column"),b=Object(l["resolveComponent"])("el-button"),m=Object(l["resolveComponent"])("el-input-number"),p=Object(l["resolveComponent"])("el-table"),j=Object(l["resolveComponent"])("el-form"),O=Object(l["resolveComponent"])("el-dialog"),v=Object(l["resolveDirective"])("loading");return Object(l["withDirectives"])((Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ee,[Object(l["createVNode"])(j,{size:"large",ref_key:"RefForm",ref:n,model:Object(l["unref"])(c),rules:f,"scroll-to-error":!0,"label-width":"120px"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",xe,[Se,Object(l["createVNode"])(i,{label:"选择网络",prop:"vNet"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{class:"input-width",placeorder:"请选择网络",modelValue:Object(l["unref"])(c).vNet,"onUpdate:modelValue":t[0]||(t[0]=e=>Object(l["unref"])(c).vNet=e),onChange:E},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(C.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.dictValue,label:e.dictName,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"选择子网",prop:"subNet"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{class:"input-width",placeorder:"请选择子网",modelValue:Object(l["unref"])(c).subNet,"onUpdate:modelValue":t[1]||(t[1]=e=>Object(l["unref"])(c).subNet=e),onChange:_},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(x.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.resourceId,label:e.name,value:e.resourceId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"主安全组",prop:"masterSecurityGroup"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{class:"input-width",placeorder:"请选择主安全组",modelValue:Object(l["unref"])(c).masterSecurityGroup,"onUpdate:modelValue":t[2]||(t[2]=e=>Object(l["unref"])(c).masterSecurityGroup=e),onChange:T},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(B.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.dictValue,label:e.dictName,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),_e]),_:1}),Object(l["createVNode"])(i,{label:"子安全组",prop:"slaveSecurityGroup"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{class:"input-width",placeorder:"请选择子安全组",modelValue:Object(l["unref"])(c).slaveSecurityGroup,"onUpdate:modelValue":t[3]||(t[3]=e=>Object(l["unref"])(c).slaveSecurityGroup=e),onChange:z},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(G.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.dictValue,label:e.dictName,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Be]),_:1})]),Object(l["createElementVNode"])("div",De,[Te,Object(l["createVNode"])(i,{label:"登录方式",prop:"keypairId"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{class:"input-width",placeorder:"请选择登录方式",modelValue:Object(l["unref"])(c).keypairId,"onUpdate:modelValue":t[4]||(t[4]=e=>Object(l["unref"])(c).keypairId=e)},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(R.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.dictValue,label:e.dictName,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Ge]),_:1}),Object(l["createVNode"])(i,{label:"高可用"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(u,{modelValue:Object(l["unref"])(c).isHa,"onUpdate:modelValue":t[5]||(t[5]=e=>Object(l["unref"])(c).isHa=e),"inline-prompt":"","active-text":"开启","active-value":1,"inactive-value":0,"inactive-text":"关闭",onChange:Q},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"系统盘"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{class:"input-width-2",placeorder:"请选择磁盘类型",modelValue:Object(l["unref"])(c).osDiskType,"onUpdate:modelValue":t[6]||(t[6]=e=>Object(l["unref"])(c).osDiskType=e),onChange:F},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(M.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.dictValue,label:e.dictName,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Object(l["createVNode"])(d,{class:"input-width-2",modelValue:Object(l["unref"])(c).diskSize,"onUpdate:modelValue":t[7]||(t[7]=e=>Object(l["unref"])(c).diskSize=e),onChange:F,disabled:!0},{append:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("GB")]),_:1},8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"节点设置"},{default:Object(l["withCtx"])(()=>[q.value?(Object(l["openBlock"])(),Object(l["createBlock"])(p,{key:0,data:Object(l["unref"])(c).instanceGroupSkuCfgs,"header-row-class-name":"theader",border:"",style:{width:"100%"},"span-method":Y},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(s,{prop:"runTiming",label:"节点类型","min-width":"200"},{default:Object(l["withCtx"])(e=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.row.vmRole)+"节点配置 ",1)]),_:1}),Object(l["createVNode"])(s,{prop:"scriptName",label:"节点规格","min-width":"300"},{default:Object(l["withCtx"])(e=>[Object(l["createElementVNode"])("div",null,["Master"!=e.row.vmRole||Object(l["unref"])(c).isHa?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ze,[Object(l["createElementVNode"])("div",Re,[Object(l["createElementVNode"])("div",null,Object(l["toDisplayString"])(e.row.skuName)+" "+Object(l["toDisplayString"])(e.row.vCPUs)+"核"+Object(l["toDisplayString"])(e.row.memoryGB)+"G",1),Object(l["createElementVNode"])("div",null,"系统盘："+Object(l["toDisplayString"])($(e.row.osVolumeType))+"云盘"+Object(l["toDisplayString"])(e.row.osVolumeSize)+"G*1",1),Object(l["createElementVNode"])("div",null,"数据盘："+Object(l["toDisplayString"])($(e.row.dataVolumeType))+"云盘"+Object(l["toDisplayString"])(e.row.dataVolumeSize)+"G*1",1)]),Object(l["createElementVNode"])("div",null,[Object(l["createVNode"])(b,{type:"primary",text:"",size:"small",onClick:t=>W(e.row),disabled:1!=Object(l["unref"])(c).isHa&&"Master"==e.row.vmRole},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("编辑")]),_:2},1032,["onClick","disabled"])])])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ue,"将部署在Ambari节点"))])]),_:1}),Object(l["createVNode"])(s,{prop:"scriptPath",label:"节点数量","min-width":"220"},{default:Object(l["withCtx"])(e=>[Object(l["createElementVNode"])("div",null,["Master"!=e.row.vmRole||Object(l["unref"])(c).isHa?(Object(l["openBlock"])(),Object(l["createBlock"])(m,{key:1,modelValue:e.row.cnt,"onUpdate:modelValue":t=>e.row.cnt=t,min:e.row.minNum,max:999,disabled:"Master"==e.row.vmRole||"Ambari"==e.row.vmRole,"step-strictly":!0},null,8,["modelValue","onUpdate:modelValue","min","disabled"])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Pe,"将部署在Ambari节点"))])]),_:1})]),_:1},8,["data"])):Object(l["createCommentVNode"])("",!0)]),_:1})]),Object(l["createElementVNode"])("div",Me,[Le,Object(l["createElementVNode"])("div",Ie,[Object(l["createVNode"])(i,{label:"主机","label-width":"80px",prop:"ambariDbCfgs.url",style:{width:"50%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).ambariDbCfgs.url,"onUpdate:modelValue":t[8]||(t[8]=e=>Object(l["unref"])(c).ambariDbCfgs.url=e),placeholder:"请输入主机","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"端口","label-width":"80px",prop:"ambariDbCfgs.port",style:{width:"20%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).ambariDbCfgs.port,"onUpdate:modelValue":t[9]||(t[9]=e=>Object(l["unref"])(c).ambariDbCfgs.port=e),placeholder:"请输入数据库端口","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"库名","label-width":"80px",prop:"ambariDbCfgs.database",style:{width:"30%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).ambariDbCfgs.database,"onUpdate:modelValue":t[10]||(t[10]=e=>Object(l["unref"])(c).ambariDbCfgs.database=e),placeholder:"请输入数据库库名","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1})]),Object(l["createElementVNode"])("div",Ae,[Object(l["createVNode"])(i,{label:"用户名","label-width":"80px",prop:"ambariDbCfgs.account",style:{width:"50%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).ambariDbCfgs.account,"onUpdate:modelValue":t[11]||(t[11]=e=>Object(l["unref"])(c).ambariDbCfgs.account=e),placeholder:"请输入用户名","show-word-limit":"",maxlength:"50",clearable:""},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"密码","label-width":"80px",prop:"ambariDbCfgs.password",style:{width:"50%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).ambariDbCfgs.password,"onUpdate:modelValue":t[12]||(t[12]=e=>Object(l["unref"])(c).ambariDbCfgs.password=e),placeholder:"请输入密码",type:"password","show-password":"","show-word-limit":"",maxlength:"50",clearable:""},null,8,["modelValue"])]),_:1})])]),Object(l["unref"])(h)?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qe,[Fe,Object(l["createElementVNode"])("div",$e,[Object(l["createVNode"])(i,{label:"主机","label-width":"80px",prop:"hiveMetadataDbCfgs.url",style:{width:"50%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).hiveMetadataDbCfgs.url,"onUpdate:modelValue":t[13]||(t[13]=e=>Object(l["unref"])(c).hiveMetadataDbCfgs.url=e),placeholder:"请输入数据库连接","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"端口","label-width":"80px",prop:"hiveMetadataDbCfgs.port",style:{width:"20%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).hiveMetadataDbCfgs.port,"onUpdate:modelValue":t[14]||(t[14]=e=>Object(l["unref"])(c).hiveMetadataDbCfgs.port=e),placeholder:"请输入数据库端口","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"库名","label-width":"80px",prop:"hiveMetadataDbCfgs.database",style:{width:"30%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).hiveMetadataDbCfgs.database,"onUpdate:modelValue":t[15]||(t[15]=e=>Object(l["unref"])(c).hiveMetadataDbCfgs.database=e),placeholder:"请输入数据库库名","show-word-limit":"",clearable:""},null,8,["modelValue"])]),_:1})]),Object(l["createElementVNode"])("div",He,[Object(l["createVNode"])(i,{label:"用户名","label-width":"80px",prop:"hiveMetadataDbCfgs.account",style:{width:"50%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).hiveMetadataDbCfgs.account,"onUpdate:modelValue":t[16]||(t[16]=e=>Object(l["unref"])(c).hiveMetadataDbCfgs.account=e),placeholder:"请输入用户名","show-word-limit":"",maxlength:"50",clearable:""},null,8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"密码","label-width":"80px",prop:"hiveMetadataDbCfgs.password",style:{width:"50%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{modelValue:Object(l["unref"])(c).hiveMetadataDbCfgs.password,"onUpdate:modelValue":t[17]||(t[17]=e=>Object(l["unref"])(c).hiveMetadataDbCfgs.password=e),placeholder:"请输入密码",type:"password","show-password":"","show-word-limit":"",maxlength:"50",clearable:""},null,8,["modelValue"])]),_:1})])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Ze,[Ke,Object(l["createVNode"])(i,{label:"日志桶"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(d,{style:{width:"50%"},modelValue:Object(l["unref"])(c).logPath,"onUpdate:modelValue":t[18]||(t[18]=e=>Object(l["unref"])(c).logPath=e),placeholder:"请输入日志桶","show-word-limit":"",maxlength:"100",clearable:""},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"]),Object(l["createElementVNode"])("div",Je,[Object(l["createVNode"])(b,{class:"pre-step",size:"large",onClick:w},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("上一步")]),_:1}),Object(l["createVNode"])(b,{type:"primary",size:"large",class:"next-step",onClick:k,loading:o.value},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("下一步")]),_:1},8,["loading"])]),Object(l["createVNode"])(O,{class:"center-dialog",modelValue:Object(l["unref"])(H),"onUpdate:modelValue":t[23]||(t[23]=e=>Object(l["isRef"])(H)?H.value=e:H=e),title:"节点规格",width:"800","destroy-on-close":""},{footer:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",Ye,[Object(l["createVNode"])(b,{onClick:t[22]||(t[22]=e=>Object(l["isRef"])(H)?H.value=!1:H=!1)},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("取消")]),_:1}),Object(l["createVNode"])(b,{type:"primary",onClick:X},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("保存")]),_:1})])]),default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",We,[Xe,Object(l["createVNode"])(j,{ref_key:"Ref_editForm",ref:J,model:Z,rules:K,"label-width":"120px",style:{width:"90%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(i,{label:"规格选择",prop:"vmskuName"},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{style:{width:"100%"},placeorder:"请选择规格",modelValue:Z.vmskuName,"onUpdate:modelValue":t[19]||(t[19]=e=>Z.vmskuName=e)},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(I.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.name,label:e.name,value:e.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Object(l["createVNode"])(i,{label:"数据盘",prop:"disk"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",Qe,[Object(l["createVNode"])(r,{style:{flex:"1"},placeorder:"请选择磁盘类型",modelValue:Z.dataVolumeType,"onUpdate:modelValue":t[20]||(t[20]=e=>Z.dataVolumeType=e)},{default:Object(l["withCtx"])(()=>[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(M.value,e=>(Object(l["openBlock"])(),Object(l["createBlock"])(a,{key:e.dictValue,label:e.dictName,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),Object(l["createVNode"])(d,{style:{flex:"1","margin-left":"15px"},modelValue:Z.dataVolumeSize,"onUpdate:modelValue":t[21]||(t[21]=e=>Z.dataVolumeSize=e)},{append:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("GB")]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"])])),[[v,o.value]])}}};a("81b0");const tt=j()(et,[["__scopeId","data-v-60300844"]]);var at=tt;const lt=e=>(Object(l["pushScopeId"])("data-v-260e6b40"),e=e(),Object(l["popScopeId"])(),e),ct={class:"step-1"},rt={class:"full-page-block-div"},ot=lt(()=>Object(l["createElementVNode"])("div",{class:"block-title"},"配置清单",-1)),nt={class:"detail-block-div"},it={class:"sub-title"},ut=lt(()=>Object(l["createElementVNode"])("div",null,"基础配置",-1)),dt={class:"detail-items"},st={class:"flex-row"},bt={class:"detail-item"},mt=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"集群名称",-1)),pt={class:"value"},jt={class:"flex-row"},Ot={class:"detail-item"},vt=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"集群标签",-1)),ft={class:"value"},Vt={class:"detail-block-div"},gt={class:"sub-title"},Nt=lt(()=>Object(l["createElementVNode"])("div",null,"软件配置",-1)),ht={class:"detail-items"},kt={class:"flex-row"},wt={class:"detail-item"},Ct=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"产品版本",-1)),yt={class:"value"},Et={class:"flex-row"},xt={class:"detail-item"},St=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"部署组件",-1)),_t={class:"value"},Bt={class:"detail-block-div"},Dt={class:"sub-title"},Tt=lt(()=>Object(l["createElementVNode"])("div",null,"硬件配置",-1)),Gt={class:"detail-items"},Ut={class:"flex-row"},zt={class:"detail-item"},Rt=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"集群网络",-1)),Pt={class:"value"},Mt={class:"detail-item"},Lt=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"集群子网",-1)),It={class:"value"},At={class:"flex-row"},qt={class:"detail-item"},Ft=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"集群安全组",-1)),$t={class:"value"},Ht=lt(()=>Object(l["createElementVNode"])("div",{class:"detail-item"},[Object(l["createElementVNode"])("div",{class:"label"},"集群外网"),Object(l["createElementVNode"])("div",{class:"value"},Object(l["toDisplayString"])("关闭"))],-1)),Zt={class:"flex-row"},Kt={class:"detail-item"},Jt=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"Ambari元数据",-1)),Wt={class:"value"},Xt={class:"detail-item"},Qt=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"Hive元数据",-1)),Yt={class:"value"},ea={class:"flex-row"},ta={class:"detail-item"},aa=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"高可用",-1)),la={class:"value"},ca={class:"detail-item"},ra=lt(()=>Object(l["createElementVNode"])("div",{class:"label"},"日志桶",-1)),oa={class:"value"},na={class:"flex-row"},ia={key:0},ua={key:1},da={key:0},sa={key:1},ba={key:0},ma={key:1},pa={class:"full-page-buttons"};var ja={__name:"step-4",props:{modelValue:Object},setup(e,{emit:t}){const a=e,c=r(a);Object(l["ref"])(null),V.required("请输入集群名称");function o(e){t("changeStep",e)}function n(){t("createEvent")}const i=Object(l["ref"])([]);function u(){g["a"].getOsDiskTypeList().then(e=>{1==e.result?i.value=e.data:N["a"].error(e.errorMsg)})}function d(e){let t=i.value.find(t=>t.dictValue==e)||{};return t.dictName}function s(e){let t="";for(let a in e)t+=t?"、"+a+"："+e[a]:a+"："+e[a];return t}return u(),(e,t)=>{const a=Object(l["resolveComponent"])("el-button"),r=Object(l["resolveComponent"])("el-table-column"),i=Object(l["resolveComponent"])("el-table");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ct,[Object(l["createElementVNode"])("div",rt,[ot,Object(l["createElementVNode"])("div",nt,[Object(l["createElementVNode"])("div",it,[ut,Object(l["createVNode"])(a,{type:"primary",text:"",size:"small",onClick:t[0]||(t[0]=e=>o(0))},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("编辑")]),_:1})]),Object(l["createElementVNode"])("div",dt,[Object(l["createElementVNode"])("div",st,[Object(l["createElementVNode"])("div",bt,[mt,Object(l["createElementVNode"])("div",pt,Object(l["toDisplayString"])(Object(l["unref"])(c).clusterName),1)])]),Object(l["createElementVNode"])("div",jt,[Object(l["createElementVNode"])("div",Ot,[vt,Object(l["createElementVNode"])("div",ft,Object(l["toDisplayString"])(s(Object(l["unref"])(c).tagMap)),1)])])])]),Object(l["createElementVNode"])("div",Vt,[Object(l["createElementVNode"])("div",gt,[Nt,Object(l["createVNode"])(a,{type:"primary",text:"",size:"small",onClick:t[1]||(t[1]=e=>o(1))},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("编辑")]),_:1})]),Object(l["createElementVNode"])("div",ht,[Object(l["createElementVNode"])("div",kt,[Object(l["createElementVNode"])("div",wt,[Ct,Object(l["createElementVNode"])("div",yt,Object(l["toDisplayString"])(Object(l["unref"])(c).instanceGroupVersion.clusterReleaseVer),1)])]),Object(l["createElementVNode"])("div",Et,[Object(l["createElementVNode"])("div",xt,[St,Object(l["createElementVNode"])("div",_t,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(Object(l["unref"])(c).instanceGroupVersion.clusterApps,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",null,Object(l["toDisplayString"])(t>0?"、":"")+Object(l["toDisplayString"])(e.app_name+" "+e.app_version),1))),256))])])])])]),Object(l["createElementVNode"])("div",Bt,[Object(l["createElementVNode"])("div",Dt,[Tt,Object(l["createVNode"])(a,{type:"primary",text:"",size:"small",onClick:t[2]||(t[2]=e=>o(2))},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("编辑")]),_:1})]),Object(l["createElementVNode"])("div",Gt,[Object(l["createElementVNode"])("div",Ut,[Object(l["createElementVNode"])("div",zt,[Rt,Object(l["createElementVNode"])("div",Pt,Object(l["toDisplayString"])(Object(l["unref"])(c).vNetName),1)]),Object(l["createElementVNode"])("div",Mt,[Lt,Object(l["createElementVNode"])("div",It,Object(l["toDisplayString"])(Object(l["unref"])(c).subNetName),1)])]),Object(l["createElementVNode"])("div",At,[Object(l["createElementVNode"])("div",qt,[Ft,Object(l["createElementVNode"])("div",$t,Object(l["toDisplayString"])(Object(l["unref"])(c).masterSecurityGroupName),1)]),Ht]),Object(l["createElementVNode"])("div",Zt,[Object(l["createElementVNode"])("div",Kt,[Jt,Object(l["createElementVNode"])("div",Wt,Object(l["toDisplayString"])(Object(l["unref"])(c).ambariDbCfgs.url),1)]),Object(l["createElementVNode"])("div",Xt,[Qt,Object(l["createElementVNode"])("div",Yt,Object(l["toDisplayString"])(Object(l["unref"])(c).hiveMetadataDbCfgs.url),1)])]),Object(l["createElementVNode"])("div",ea,[Object(l["createElementVNode"])("div",ta,[aa,Object(l["createElementVNode"])("div",la,Object(l["toDisplayString"])(1==Object(l["unref"])(c).isHa?"开启":"关闭"),1)]),Object(l["createElementVNode"])("div",ca,[ra,Object(l["createElementVNode"])("div",oa,Object(l["toDisplayString"])(Object(l["unref"])(c).logPath),1)])]),Object(l["createElementVNode"])("div",na,[Object(l["createVNode"])(i,{data:Object(l["unref"])(c).instanceGroupSkuCfgs,"header-row-class-name":"theader",border:"",style:{width:"100%"}},{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{prop:"runTiming",label:"节点类型","min-width":"100"},{default:Object(l["withCtx"])(e=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.row.vmRole)+"节点配置 ",1)]),_:1}),Object(l["createVNode"])(r,{prop:"runTiming",label:"型号","min-width":"150"},{default:Object(l["withCtx"])(e=>["Master"!=e.row.vmRole||Object(l["unref"])(c).isHa?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ua,Object(l["toDisplayString"])(e.row.skuName)+" "+Object(l["toDisplayString"])(e.row.vCPUs)+"核"+Object(l["toDisplayString"])(e.row.memoryGB)+"G",1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ia,"将部署在Ambari节点"))]),_:1}),Object(l["createVNode"])(r,{prop:"scriptName",label:"存储","min-width":"200"},{default:Object(l["withCtx"])(e=>["Master"!=e.row.vmRole||Object(l["unref"])(c).isHa?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",sa,[Object(l["createElementVNode"])("div",null,"系统盘："+Object(l["toDisplayString"])(d(e.row.osVolumeType))+"云盘"+Object(l["toDisplayString"])(e.row.osVolumeSize)+"G*1",1),Object(l["createElementVNode"])("div",null,"数据盘："+Object(l["toDisplayString"])(d(e.row.dataVolumeType))+"云盘"+Object(l["toDisplayString"])(e.row.dataVolumeSize)+"G*1",1)])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",da,"将部署在Ambari节点"))]),_:1}),Object(l["createVNode"])(r,{prop:"scriptPath",label:"节点数量","min-width":"150"},{default:Object(l["withCtx"])(e=>["Master"!=e.row.vmRole||Object(l["unref"])(c).isHa?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ma,"实例数量*"+Object(l["toDisplayString"])(e.row.cnt),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ba,"将部署在Ambari节点"))]),_:1})]),_:1},8,["data"])])])])]),Object(l["createElementVNode"])("div",pa,[Object(l["createVNode"])(a,{class:"pre-step",size:"large",onClick:t[3]||(t[3]=e=>o(2))},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("上一步")]),_:1}),Object(l["createVNode"])(a,{type:"primary",size:"large",class:"next-step",onClick:n},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("立即创建")]),_:1})])])}}};a("615f");const Oa=j()(ja,[["__scopeId","data-v-260e6b40"]]);var va=Oa,fa=a("6605");const Va={randomString(e){e=e||32;var t="abacdefghjklmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789",a=t.length,l="";for(let c=0;c<e;c++)l+=t.charAt(Math.floor(Math.random()*a));return l}};var ga=Va;const Na=e=>(Object(l["pushScopeId"])("data-v-c3a0e156"),e=e(),Object(l["popScopeId"])(),e),ha={class:"create detail-css"},ka=Na(()=>Object(l["createElementVNode"])("div",{class:"page-title"},"创建集群(SDP)",-1)),wa={class:"steps-div"},Ca={class:"step-cont"};var ya={__name:"create",setup(e){const t=Object(l["ref"])(!1),a=Object(fa["d"])(),c=[{name:"基础配置"},{name:"软件配置"},{name:"硬件配置"},{name:"确认配置信息"}];let r=Object(l["ref"])(0);const o=Object(l["ref"])({clusterName:"sdp-"+ga.randomString(10),tagMap:{},instanceGroupVersion:{clusterReleaseVer:"",clusterApps:[]},clusterCfgs:[],ambariUsername:"admin",ambariPassword:"",deleteProtected:"",confClusterScript:[],vNet:"",vNetName:"",subNet:"",subNetName:"",masterSecurityGroup:"",masterSecurityGroupName:"",slaveSecurityGroup:"",slaveSecurityGroupName:"",keypairId:"",isHa:1,osDiskType:"StandardSSD_LRS",diskSize:100,instanceGroupSkuCfgs:[{vmRole:"Ambari",osVolumeType:"StandardSSD_LRS",osVolumeSize:100,cnt:1,dataVolumeType:"StandardSSD_LRS",dataVolumeSize:200,memoryGB:8,skuName:"",vCPUs:4,minNum:1},{vmRole:"Master",osVolumeType:"StandardSSD_LRS",osVolumeSize:100,cnt:2,dataVolumeType:"StandardSSD_LRS",dataVolumeSize:200,memoryGB:8,skuName:"",vCPUs:4,minNum:1},{vmRole:"Core",osVolumeType:"StandardSSD_LRS",osVolumeSize:100,cnt:1,dataVolumeType:"StandardSSD_LRS",dataVolumeSize:200,memoryGB:8,skuName:"",vCPUs:4,minNum:2},{vmRole:"Task",osVolumeType:"StandardSSD_LRS",osVolumeSize:100,cnt:0,dataVolumeType:"StandardSSD_LRS",dataVolumeSize:200,memoryGB:8,skuName:"",vCPUs:4,minNum:0}],ambariDbCfgs:{url:"",account:"",password:"",port:"3306",database:""},hiveMetadataDbCfgs:{url:"",account:"",password:"",port:"3306",database:""},logPath:""});function n(){g["a"].createCluster(o.value).then(e=>{1==e.result?(N["a"].success("集群开始创建中..."),a.replace({path:"/clusterlist"})):N["a"].error(e.errorMsg)})}return(e,a)=>{const i=Object(l["resolveDirective"])("loading");return Object(l["withDirectives"])((Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ha,[ka,Object(l["createElementVNode"])("div",wa,[Object(l["createVNode"])(Object(l["unref"])(v),{modelValue:Object(l["unref"])(r),"onUpdate:modelValue":a[0]||(a[0]=e=>Object(l["isRef"])(r)?r.value=e:r=e),stepOptions:c},null,8,["modelValue"])]),Object(l["createElementVNode"])("div",Ca,[0==Object(l["unref"])(r)?(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(P),{key:0,modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),onChangeStep:a[2]||(a[2]=e=>Object(l["isRef"])(r)?r.value=e:r=e)},null,8,["modelValue"])):1==Object(l["unref"])(r)?(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(Ce),{key:1,modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value=e),onChangeStep:a[4]||(a[4]=e=>Object(l["isRef"])(r)?r.value=e:r=e)},null,8,["modelValue"])):2==Object(l["unref"])(r)?(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(at),{key:2,modelValue:o.value,"onUpdate:modelValue":a[5]||(a[5]=e=>o.value=e),onChangeStep:a[6]||(a[6]=e=>Object(l["isRef"])(r)?r.value=e:r=e)},null,8,["modelValue"])):3==Object(l["unref"])(r)?(Object(l["openBlock"])(),Object(l["createBlock"])(Object(l["unref"])(va),{key:3,modelValue:o.value,"onUpdate:modelValue":a[7]||(a[7]=e=>o.value=e),onChangeStep:a[8]||(a[8]=e=>Object(l["isRef"])(r)?r.value=e:r=e),onCreateEvent:n},null,8,["modelValue"])):Object(l["createCommentVNode"])("",!0)])])),[[i,t.value]])}}};a("cbfd");const Ea=j()(ya,[["__scopeId","data-v-c3a0e156"]]);t["default"]=Ea},"7ea2":function(e,t,a){"use strict";var l=a("751a");const c={list(e){return l["a"].post("/admin/api/queryclusterlist",e)},gettagKeyList(e){return l["a"].get("/admin/api/gettagkeylist",e)},getReleases(e){return l["a"].get("/admin/api/getreleases",e)},getReleaseApps(e){return l["a"].post("/admin/api/getreleaseapps",e)},getClassificationList(e){return l["a"].get("/admin/api/getclassificationlist",e)},getNetworkList(e){return l["a"].get("/admin/api/getnetworklist",e)},getSubnetList(e){return l["a"].get("/admin/api/getsubnetlist",e)},getPrimarySecurityGroupList(e){return l["a"].get("/admin/api/getprimarysecuritygrouplist",e)},getSubSecurityGroupList(e){return l["a"].get("/admin/api/getsubsecuritygrouplist",e)},getKeypairList(e){return l["a"].get("/admin/api/getkeypairlist",e)},getOsDiskTypeList(e){return l["a"].get("/admin/api/getosdisktypelist",e)},getVmskuList(e){return l["a"].get("/admin/api/getvmskulist",e)},createCluster(e){return l["a"].post("/admin/api/createcluster",e)},checkConnect(e){return l["a"].post("/admin/api/checkconnect",e)},checkClusterName(e){return l["a"].post("/admin/api/checkclustername",e)},getTagValueList(e){return l["a"].post("/admin/api/gettagvaluelist",e)},deleteCluster(e){return l["a"].post("/admin/api/deletecluster",e)}};t["a"]=c},"81b0":function(e,t,a){"use strict";a("0db7")},"91bc":function(e,t,a){},ab36:function(e,t,a){var l=a("861d"),c=a("9112");e.exports=function(e,t){l(t)&&"cause"in t&&c(e,"cause",t.cause)}},ab48:function(e,t,a){},aeb0:function(e,t,a){var l=a("9bf2").f;e.exports=function(e,t,a){a in e||l(e,a,{configurable:!0,get:function(){return t[a]},set:function(e){t[a]=e}})}},b980:function(e,t,a){var l=a("d039"),c=a("5c6c");e.exports=!l((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",c(1,7)),7!==e.stack)}))},be7e:function(e,t,a){"use strict";a("5ef7")},c214:function(e,t,a){"use strict";a("7072")},cbfd:function(e,t,a){"use strict";a("ab48")},d2bb:function(e,t,a){var l=a("e330"),c=a("825a"),r=a("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,a={};try{e=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(a,[]),t=a instanceof Array}catch(o){}return function(a,l){return c(a),r(l),t?e(a,l):a.__proto__=l,a}}():void 0)},d766:function(e,t,a){},d815:function(e,t,a){},d9e2:function(e,t,a){var l=a("23e7"),c=a("da84"),r=a("2ba4"),o=a("e5cb"),n="WebAssembly",i=c[n],u=7!==Error("e",{cause:7}).cause,d=function(e,t){var a={};a[e]=o(e,t,u),l({global:!0,constructor:!0,arity:1,forced:u},a)},s=function(e,t){if(i&&i[e]){var a={};a[e]=o(n+"."+e,t,u),l({target:n,stat:!0,constructor:!0,arity:1,forced:u},a)}};d("Error",(function(e){return function(t){return r(e,this,arguments)}})),d("EvalError",(function(e){return function(t){return r(e,this,arguments)}})),d("RangeError",(function(e){return function(t){return r(e,this,arguments)}})),d("ReferenceError",(function(e){return function(t){return r(e,this,arguments)}})),d("SyntaxError",(function(e){return function(t){return r(e,this,arguments)}})),d("TypeError",(function(e){return function(t){return r(e,this,arguments)}})),d("URIError",(function(e){return function(t){return r(e,this,arguments)}})),s("CompileError",(function(e){return function(t){return r(e,this,arguments)}})),s("LinkError",(function(e){return function(t){return r(e,this,arguments)}})),s("RuntimeError",(function(e){return function(t){return r(e,this,arguments)}}))},e391:function(e,t,a){var l=a("577e");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:l(e)}},e5cb:function(e,t,a){"use strict";var l=a("d066"),c=a("1a2d"),r=a("9112"),o=a("3a9b"),n=a("d2bb"),i=a("e893"),u=a("aeb0"),d=a("7156"),s=a("e391"),b=a("ab36"),m=a("0d26"),p=a("b980"),j=a("83ab"),O=a("c430");e.exports=function(e,t,a,v){var f="stackTraceLimit",V=v?2:1,g=e.split("."),N=g[g.length-1],h=l.apply(null,g);if(h){var k=h.prototype;if(!O&&c(k,"cause")&&delete k.cause,!a)return h;var w=l("Error"),C=t((function(e,t){var a=s(v?t:e,void 0),l=v?new h(e):new h;return void 0!==a&&r(l,"message",a),p&&r(l,"stack",m(l.stack,2)),this&&o(k,this)&&d(l,this,C),arguments.length>V&&b(l,arguments[V]),l}));if(C.prototype=k,"Error"!==N?n?n(C,w):i(C,w,{name:!0}):j&&f in h&&(u(C,h,f),u(C,h,"prepareStackTrace")),i(C,h),!O)try{k.name!==N&&r(k,"name",N),k.constructor=C}catch(y){}return C}}},f5df:function(e,t,a){var l=a("00ee"),c=a("1626"),r=a("c6b6"),o=a("b622"),n=o("toStringTag"),i=Object,u="Arguments"==r(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(a){}};e.exports=l?r:function(e){var t,a,l;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=d(t=i(e),n))?a:u?r(t):"Object"==(l=r(t))&&c(t.callee)?"Arguments":l}}}]);
//# sourceMappingURL=chunk-860b2b08.e3774503.js.map